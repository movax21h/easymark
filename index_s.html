<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="http://foolpanda.com/favicon.ico" rel="SHORTCUT ICON">
<title>摸啊摸啊我的快乐</title>
<!-- 新 Bootstrap4 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
<!-- icon 支持 class ="fa fa-*"-->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> 
<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->

<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<!-- popper.min.js 用于弹窗、提示、下拉菜单 -->
<script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
<!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script>
	function collection(e){
		
    	if(typeof(Storage)!=="undefined")
			{
				var id = e.id
				if(Number(e.value)){
					var state = 0;
					document.getElementById(e.id).childNodes[0].style.color="black";
					document.getElementById(e.id).value=0;
				}else{
					var state = 1;
					document.getElementById(e.id).childNodes[0].style.color="red";
					document.getElementById(e.id).value=1;
				}
				localStorage.setItem(e.id, state);	

			  	
			  
			}
			else
			{
			  alert("对不起不支持浏览器存储");
			}
		
	}
    //查找数据  
   
</script>
<script>
	function clicksea(){
		var ponds = document.getElementById("ponds");
		ponds.className="nav-link";
		var sea = document.getElementById("sea");
		sea.className="nav-link active";
		var mypage = document.getElementById("mypage");
		mypage.className="tab-pane mt-3";
		var otherpage = document.getElementById("otherpage");
		otherpage.className="tab-pane active mt-3";
	}
</script>
</head>
<body style="height: auto">

<nav class="navbar navbar-expand-md navbar-dark bg-dark  justify-content-between" id="dispalyaction">
<!-- 导航栏logo -->
<div class="navbar navbar-nav">
<a class="navbar-brand" href="#"><img class="rounded" src="panda.jpg" alt="logo" style="width:40px;"></a>
<!-- 导航栏文字 -->
<span class="navbar-text">快乐就对了！</span>
</div>
<!-- Toggler/collapsibe Button 菜单按钮 -->
<div class="navbar navbar-nav">
<button style="padding-bottom: 2px" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
<span class="fa fa-navicon"></span>
</button>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#searchbar">
    <span class="fa fa-search"></span>
</button>
</div>
<!--搜索条-->
<div class="collapse navbar-collapse"  id="searchbar" data-parent="#dispalyaction">
	<!-- 选择搜索引擎
	<ul id="mytab" class="nav navbar-nav navbar-expand-md">
		<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle active" data-toggle="dropdown" href="#"><span>百度</span></a>
			<div class="dropdown-menu">
				<a id="biyingtab" class="dropdown-item" data-toggle="tab" href="#biying">必应</a>
				<a id="baidutab" class="dropdown-item" data-toggle="tab" href="#baidu">百度</a>
			</div>
		</li>
    </ul>
	-->
	<div class="tab-content">
		<div class="tab-pane active"  id="biying">
		<form action="https://cn.bing.com/search" class="form-inline"  target="_blank">
				<input type="text" name="q" class="form-control" placeholder="search：" >
				<input type="submit" class="form-control" value="搜索">
		</form>
		</div>
		<div class="tab-pane" id="baidu">
		<form action="https://www.baidu.com/s" class="form-inline" target="_blank">
				<input  type="text" name="wd" class="form-control" placeholder="search：">
				<span></span>
				<input type="submit" class="form-control" value="搜索">
		</form>
		</div>

	</div>
</div>
<!-- 导航栏 -->
<div class="collapse navbar-collapse" data-toggle="collapse" id="collapsibleNavbar" data-parent="#dispalyaction">
<ul class="nav navbar-nav">
    <li class="nav-item">
      <a id="ponds" class="nav-link active" onClick="showall();" data-toggle="tab" href="#mypage">我的鱼塘</a>
    </li>
    <li class="nav-item">
      <a id="sea" class="nav-link" data-toggle="tab" href="#otherpage">红海蓝海</a>
    </li>
    <li class="nav-item">
      <a class="nav-link disabled" href="#">深海</a>
    </li>
</ul>
</div>
</nav>

<!-- -->


<div class="tab-content">
<div id="mypage" class="tab-pane active mt-3">		

	<div id="myfavor" class="col-12">
	</div>
	<br>
	<hr class="divider" />
	<div id="tips" class="text-center col-12">
	<a class="btn btn-link" onClick="clicksea()" href="#">
	<span class="fa fa-plus"></span>添加收藏网站
	</a>
	</div>
	<!--
	<div class="row mt-1">
			<div class="col-sm-2 col-md-2 mt-1"></div>
			<div class="col-sm-2 col-md-2 mt-1">
				  <button class="btn bg-secondary text-white btn-block disabled" >撒网</button>
			</div>
	</div>

	<div class="row mt-1">
	</div>
	-->
	<br><br><br>
</div>
<div id="otherpage" class="tab-pane mt-3">
	<div class="row">
	<div class="col-0 col-sm-0 col-md-1"></div>
	<div class="col-12 col-sm-12 col-md-10">
		<table id="websitetable" class="table table-striped">
		<thead>
		  <tr>
			<th>名称</th>
			<th>类型</th>
			<th>描述</th>
			<th>点击<span class="fa fa-heart"></span>收藏</th>  
		  </tr>
		</thead>
		<tbody id="websitetbody">
		  <tr>
			<td>百度</td>
			<td>搜索</td>
			<td>互联网广告商</td>
			<td><button><span class="fa fa-heart" style="color: black"></span></button></td>
		  </tr>
		</tbody>
	  </table>
	</div>
	<div class="col-0 col-sm-0  col-md-1"></div>
	</div>
</div>
</div>
<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-bottom d-flex justify-content-center">
  <ul class="navbar-nav">
	<a href="#" class="nav-link"><span id="abc">这是一个测试页面</span></a>
  </ul>
</nav>

<script>

$(function(){
	$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
		// 获取已激活的标签页的名称
		var activeTab = $(e.target).text(); 
		$("#abc").html(activeTab);
	});
});
</script>
<script>
showall();
xmltotable();
function loadXMLDoc(dname){
    if (window.XMLHttpRequest)
    {
        xhttp=new XMLHttpRequest();
    }
    else
    {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET",dname,false);
    xhttp.send();
    return xhttp.responseXML;
}
function xmltotable(){
xmlDoc=loadXMLDoc("website.xml"); 

var x=xmlDoc.getElementsByTagName("website");
for (i=0;i<x.length;i++)
  { 
var trnum = document.getElementById("websitetbody").getElementsByTagName("tr").length
var tableid = document.getElementById("websitetbody").insertRow(trnum);
var c1 = tableid.insertCell(0);
var c2 = tableid.insertCell(1);
var c3 = tableid.insertCell(2);
var c4 = tableid.insertCell(3);
c1.innerHTML="<a href='"+x[i].getElementsByTagName("tags")[0].childNodes[0].nodeValue+"'><span>"+x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue+"</span></a>"
c2.innerHTML=x[i].getElementsByTagName("tags")[0].childNodes[0].nodeValue
c3.innerHTML=x[i].getElementsByTagName("note")[0].childNodes[0].nodeValue
	 if(Number(localStorage.getItem(x[i].getElementsByTagName("webid")[0].childNodes[0].nodeValue))){
			c4.innerHTML="<button onclick='collection(this)' value='1' id='"+x[i].getElementsByTagName("webid")[0].childNodes[0].nodeValue+"'><span class='fa fa-heart' style='color: red'></span></button>"
		}else{
			c4.innerHTML="<button onclick='collection(this)' value='0' id='"+x[i].getElementsByTagName("webid")[0].childNodes[0].nodeValue+"'><span class='fa fa-heart' style='color: black'></span></button>"
		}

  }	
}

function fnDelete(elem_id){ 
    var elem = document.getElementById(elem_id);
    while(elem.hasChildNodes()) //当elem下还存在子节点时 循环继续
    {
        elem.removeChild(elem.firstChild);
    }
}
function sortNumber(a,b){
return a - b
}
function showall(){
		var idlist = new Array();
        for(var i=0;i<localStorage.length;i++){  
                var id = localStorage.key(i);
				if(Number(localStorage.getItem(id))){
					idlist.push(id)
				}else{
					
				}
                
            }
		idlist.sort(sortNumber);
		xmlDoc=loadXMLDoc("website.xml"); 
		var x=xmlDoc.getElementsByTagName("website");
		var showlist = new Object();
		for(i=0;i<x.length;i++){
			var showid =x[i].getElementsByTagName("webid")[0].childNodes[0].nodeValue;
			
			if ((jQuery.inArray(showid,idlist))>=0){
				var name = x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue
				var tags = x[i].getElementsByTagName("tags")[0].childNodes[0].nodeValue
				var webadr = x[i].getElementsByTagName("webadr")[0].childNodes[0].nodeValue
				var a = new Object()
				a ={webname:name,tags:tags,url:webadr}
				showlist[showid] = a
			}
		}

	 	var mypage1  = document.getElementById("myfavor");
		fnDelete("myfavor");
		var befor = 10;
	 	var num1 =0;
		for(var x in idlist){
/*			document.write(idlist[x]-befor)
			document.write("<br>")
			document.write(idlist[x])
			document.write("<br>") 
*/
			if ((idlist[x]-befor)>=20){
				
				var div10 = document.createElement("div");
				div10.className="row mt-1";
				var div12 = document.createElement("div");
				div12.className="col-sm-1 col-md-1 mt-1";
				var div11 = document.createElement("div");
				div11.className="col-sm-2 col-md-2 mt-1";
				var button11 = document.createElement("a");
				button11.className = "btn bg-secondary text-light btn-block disabled";
				var span11 = document.createElement("span");
				var text11 = document.createTextNode(showlist[idlist[x]].tags);
				span11.appendChild(text11);
				button11.appendChild(span11);
				div11.appendChild(button11);
				
				div10.appendChild(div12);
				div10.appendChild(div11);
				
				var div0 = document.createElement("div");
				div0.className="row mt-1";
				var div1 = document.createElement("div");
				div1.className="col-sm-1 col-md-1 mt-1";
				div0.appendChild(div1);
				
				mypage1.appendChild(div10);
				num1 = 0;
			}
			if( (num1 % 5)==0){
				
				var div0 = document.createElement("div");
				div0.className="row mt-1";
				var div1 = document.createElement("div");
				div1.className="col-sm-1 col-md-1 mt-1";
				div0.appendChild(div1);
				
			}
			
			var div2 = document.createElement("div");
			div2.className="col-sm-2 col-md-2 mt-1";
			var button1 = document.createElement("a");
			button1.className = "btn bg-dark text-light btn-block";
			button1.href = showlist[idlist[x]].url;
			button1.target = "_blank"
			var span1 = document.createElement("span");
			var text1 = document.createTextNode(showlist[idlist[x]].webname);
			span1.appendChild(text1);
			button1.appendChild(span1);
			div2.appendChild(button1);
			div0.appendChild(div2);

			mypage1.appendChild(div0);
			num1 =num1+1;
			befor=idlist[x];
			
		}
	 	
}

</script>
</body>
</html>